import{r as l,b as j,j as e,e as y}from"./index-Bh_tHRrc.js";function w(){const[s,m]=l.useState(!0),[a,g]=l.useState({email:"",password:"",username:""}),[c,u]=l.useState(""),h=j(),d="https://youtubecloneserver-ro5i.onrender.com",o=r=>{g({...a,[r.target.name]:r.target.value})},x=async r=>{r.preventDefault();const p=s?{email:a.email,password:a.password}:a;try{const t=s?`${d}/api/users/login`:`${d}/api/users/register`;console.log("Sending Payload:",p);const i=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),n=await i.json();console.log("Response Status:",i.status),console.log("Response Data:",n),i.ok?(h(y(n)),sessionStorage.setItem("token",n.token),sessionStorage.setItem("user",JSON.stringify(n.user)),window.location.href="/"):u(n.message||"An error occurred")}catch(t){console.error("Fetch error:",t),u("Something went wrong. Please try again.")}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"form-box",children:[e.jsx("h2",{children:s?"Login":"Sign Up"}),e.jsxs("form",{onSubmit:x,children:[c&&e.jsx("p",{className:"error-message",children:c}),!s&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Username"}),e.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:a.username,onChange:o,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:a.email,onChange:o,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",name:"password",placeholder:"Enter your password",value:a.password,onChange:o,required:!0})]}),e.jsx("button",{type:"submit",className:"btn",children:s?"Login":"Sign Up"})]}),e.jsxs("p",{className:"toggle-text",children:[s?"Don't have an account?":"Already have an account?",e.jsx("span",{onClick:()=>m(!s),children:s?" Sign up":" Login"})]})]})})}export{w as default};
