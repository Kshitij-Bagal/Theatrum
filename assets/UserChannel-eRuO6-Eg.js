import{r as c,u as S,c as D,b as V,j as e,g as k,h as E,i as _,k as w,m as F}from"./index-Bh_tHRrc.js";const U=h=>{const[x,i]=c.useState(null),[a,j]=c.useState(!0),[m,r]=c.useState(null),u="https://youtubecloneserver-ro5i.onrender.com";return c.useEffect(()=>{(async()=>{try{const s=await fetch(`${u}/api/channels/user/${h}`);if(!s.ok){if(s.status===404){console.log("user does not have channel kindly create one"),i(null);return}throw new Error(`Error ${s.status}: ${s.statusText}`)}const o=await s.json();i(o)}catch(s){console.error("Fetch Error:",s),r(s.message)}finally{j(!1)}})()},[h]),{userChannel:x,loading:a,error:m,updateVideo:async(d,s)=>{try{return(await axios.put(`${u}/api/videos/${d}`,s)).data}catch(o){r(o.message)}}}},L=["Sci-Fi","Adventure","Sports","Healthcare","Anime","Cartoon","Politics","News","Entertainment","Knowledge","Gaming","Movies","TV Shows","Vlogs","Podcasts","Tech","Music","Education","Fashion","Lifestyle","Fitness","Cooking","DIY","Business","Finance","Science","Nature","History","Religion","Culture","Travel","Food","Documentary","Comedy","Drama","Action","Fantasy","Calm","Horror","Thriller","Romance","Mystery","Biography","Crime","Western","Musical","War","Supernatural","Family","Animation","Superhero","Spy"];function $(){var b;const{userId:h}=S(),x=D(),i=V(),{userChannel:a,loading:j,error:m}=U(h),[r,u]=c.useState({name:"",description:"",logo:"",banner:""}),[p,d]=c.useState([]);c.useEffect(()=>{a&&(u({name:a.name,description:a.description,logo:a.logo,banner:a.banner}),d(a.videos||[]))},[a]);const s=n=>{u({...r,[n.target.name]:n.target.value})},o=n=>{n.preventDefault(),i(a?_({id:a._id,updatedData:r}):w({...r,owner:h}))},f=()=>{i(F(a._id)),x("/")},v=n=>{i(E(n)),d(p.filter(l=>l._id!==n))},g=(n,l,t)=>{d(N=>N.map(C=>C._id===n?{...C,[l]:t}:C))},y=n=>{const l=p.find(t=>t._id===n);i(k({id:n,updatedData:l}))};return j?e.jsx("h2",{children:"Loading..."}):m?e.jsxs("h2",{children:["Error: ",m]}):e.jsx("div",{className:"channel",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"channel-banner",children:e.jsx("img",{src:a.banner,alt:"Channel Banner",className:"banner-image"})}),e.jsxs("div",{className:"channel-header",children:[e.jsx("img",{src:a.logo,alt:"Channel Logo",className:"channel-logo"}),e.jsxs("div",{className:"channel-info",children:[e.jsx("h1",{children:a.name}),e.jsxs("p",{children:[(b=a.subscribers)==null?void 0:b.toLocaleString()," Subscribers"]}),e.jsxs("p",{children:[p.length," Videos"]})]})]}),e.jsxs("div",{className:"channel-description",children:[e.jsx("h2",{children:"About this channel"}),e.jsx("p",{children:a.description})]}),e.jsxs("div",{className:"channel-videos",children:[e.jsx("h2",{children:"Videos"}),e.jsx("div",{className:"video-list",children:p.map(n=>{var l;return e.jsxs("div",{className:"video-card",children:[e.jsx("img",{src:n.thumbnailUrl||"fallback-thumbnail.jpg",alt:n.title||"Untitled"}),e.jsx("input",{type:"text",value:n.title,onChange:t=>g(n._id,"title",t.target.value)}),e.jsx("input",{type:"text",value:n.tags,onChange:t=>g(n._id,"tags",t.target.value)}),e.jsx("textarea",{value:n.description||"",onChange:t=>g(n._id,"description",t.target.value)}),e.jsx("select",{value:n.type,onChange:t=>g(n._id,"type",t.target.value),children:L.map(t=>e.jsx("option",{value:t,children:t},t))}),e.jsxs("p",{children:[(l=n.views)==null?void 0:l.toLocaleString()," views"]}),e.jsxs("p",{children:[n.likes," Likes | ",n.dislikes," Dislikes"]}),e.jsx("button",{onClick:()=>y(n._id),className:"update-video-btn",children:"Update Video"}),e.jsx("button",{onClick:()=>v(n._id),className:"delete-video-btn",children:"Delete Video"})]},n._id)})})]}),e.jsxs("div",{className:"channel-management",children:[e.jsx("button",{onClick:o,className:"edit-btn",children:"Edit Channel"}),e.jsx("button",{onClick:f,className:"delete-btn",children:"Delete Channel"})]})]}):e.jsxs("div",{className:"create-channel",children:[e.jsx("h2",{children:"Create Your Channel"}),e.jsxs("form",{onSubmit:o,children:[e.jsx("input",{type:"text",name:"name",placeholder:"Channel Name",value:r.name,onChange:s,required:!0}),e.jsx("input",{type:"text",name:"description",placeholder:"Description",value:r.description,onChange:s,required:!0}),e.jsx("input",{type:"text",name:"logo",placeholder:"Logo URL",value:r.logo,onChange:s,required:!0}),e.jsx("input",{type:"text",name:"banner",placeholder:"Banner URL",value:r.banner,onChange:s,required:!0}),e.jsx("button",{type:"submit",children:"Create Channel"})]})]})})}export{$ as default};
