import{r as h,j as p,L as w}from"./index-d-ClT2-m.js";import{V as T}from"./VideoList-CZd1b6mt.js";import"./VideoCard-CSCac-jJ.js";const $=()=>{const[l,a]=h.useState([]),[m,f]=h.useState(!1),[u,o]=h.useState(null),n="https://theatrum-server.onrender.com",r=async()=>{f(!0);try{const s=await(await fetch(`${n}/api/videos`)).json();a(s)}catch(e){o(e.message)}finally{f(!1)}},c=async e=>{try{const t=await(await fetch(`${n}/api/videos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();a(i=>[...i,t])}catch(s){o(s.message)}},j=async(e,s)=>{try{const i=await(await fetch(`${n}/api/videos/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();a(d=>d.map(y=>y._id===e?i:y))}catch(t){o(t.message)}},V=async e=>{try{await fetch(`${n}/api/videos/${e}`,{method:"DELETE"}),a(s=>s.filter(t=>t._id!==e))}catch(s){o(s.message)}},g=async e=>{try{const t=await(await fetch(`${n}/api/videos/${e}/like`,{method:"POST"})).json();a(i=>i.map(d=>d._id===e?t:d))}catch(s){o(s.message)}},v=async(e,s)=>{try{const i=await(await fetch(`${n}/api/videos/${e}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();a(d=>d.map(y=>y._id===e?i:y))}catch(t){o(t.message)}};return h.useEffect(()=>{r()},[]),{videos:l,loading:m,error:u,fetchVideos:r,createVideo:c,updateVideo:j,deleteVideo:V,likeVideo:g,addComment:v}};function L(){const{videos:l,loading:a,error:m,fetchVideos:f}=$(),[u,o]=h.useState([]);h.useEffect(()=>{f(),n()},[]);const n=async()=>{try{const c=await(await fetch("https://theatrum-server.onrender.com/api/videos/get/types")).json();Array.isArray(c)?o(c):o([])}catch(r){console.error("Error fetching video types:",r),o([])}};return p.jsxs("div",{className:"home",children:[p.jsx("div",{className:"video_types",children:u.map((r,c)=>p.jsx(w,{to:`/browse/${encodeURIComponent(r)}`,className:"video-type",children:r},c))}),a&&p.jsx("p",{children:"Loading videos..."}),m&&p.jsx("p",{children:m}),!a&&!m&&p.jsx(T,{videos:l})]})}export{L as default};
