import{r as s,b as D,j as t}from"./index-qpR2RHHa.js";function A(){const[c,y]=s.useState(null),[r,f]=s.useState(""),[n,x]=s.useState(""),[h,S]=s.useState(""),[l,C]=s.useState(""),[i,j]=s.useState(""),[g,d]=s.useState(!1),[m,T]=s.useState(0),u=D(e=>e.users.user),F="https://youtubecloneserver-ro5i.onrender.com",I=["Sci-Fi","Adventure","Sports","Healthcare","Anime","Cartoon","Politics","News","Entertainment","Knowledge","Gaming","Movies","TV Shows","Vlogs","Podcasts","Tech","Music","Education","Fashion","Lifestyle","Fitness","Cooking","DIY","Business","Finance","Science","Nature","History","Religion","Culture","Travel","Food","Documentary","Comedy","Drama","Action","Fantasy","Calm","Horror","Thriller","Romance","Mystery","Biography","Crime","Western","Musical","War","Supernatural","Family","Animation","Superhero","Spy"],U=e=>{const o=e.target.files[0];if(!o.type.startsWith("video/")){alert("Please upload a valid video file.");return}y(o)},w=async()=>{if(!c||!r||!n||!l||!i)return alert("All required fields must be filled!");d(!0),T(0);const e=sessionStorage.getItem("token"),o=u==null?void 0:u._id;if(!e||!o){alert("Authentication error. Please log in."),d(!1);return}const a=new FormData;a.append("video",c),a.append("title",r),a.append("description",n),a.append("channelId",l),a.append("tags",h),a.append("type",i),a.append("uploaderId",o);try{const v=await(await fetch(`${F}/upload`,{method:"POST",headers:{Authorization:`Bearer ${e}`},body:a})).json();if(!v.video)throw new Error("Invalid server response");alert(`Video uploaded successfully: ${v.video.title}`)}catch(p){console.error("Upload failed:",p),alert(`Upload failed: ${p.message}`)}finally{d(!1)}};return t.jsxs("div",{className:"upload-container",children:[t.jsx("h2",{children:"Upload Video"}),t.jsx("input",{type:"text",placeholder:"Title *",value:r,onChange:e=>f(e.target.value),required:!0}),t.jsx("textarea",{placeholder:"Description *",value:n,onChange:e=>x(e.target.value),required:!0}),t.jsx("input",{className:"upload-input",type:"file",accept:"video/*",onChange:U,required:!0}),t.jsx("input",{className:"upload-input",type:"text",placeholder:"Channel ID *",value:l,onChange:e=>C(e.target.value),required:!0}),t.jsx("input",{className:"upload-input",type:"text",placeholder:"Tags (comma-separated)",value:h,onChange:e=>S(e.target.value)}),t.jsxs("select",{value:i,onChange:e=>j(e.target.value),required:!0,children:[t.jsx("option",{value:"",children:"Select Video Type *"}),I.map((e,o)=>t.jsx("option",{value:e,children:e},o))]}),t.jsx("button",{onClick:w,disabled:g,children:g?"Uploading...":"Upload"}),m>0&&t.jsx("progress",{value:m,max:"100"})]})}export{A as default};
