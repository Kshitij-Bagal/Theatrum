import{r as l,b as x,j as e,e as j}from"./index-CM61exEb.js";function S(){const[s,p]=l.useState(!0),[a,m]=l.useState({email:"",password:"",username:""}),[c,u]=l.useState(""),g=x(),t=n=>{m({...a,[n.target.name]:n.target.value})},h=async n=>{n.preventDefault();const d=s?{email:a.email,password:a.password}:a;try{const o=s?"https://theatrum-server.onrender.com/api/users/login":"https://theatrum-server.onrender.com/api/users/register";console.log("Sending Payload:",d);const i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),r=await i.json();console.log("Response Status:",i.status),console.log("Response Data:",r),i.ok?(g(j(r)),sessionStorage.setItem("token",r.token),sessionStorage.setItem("user",JSON.stringify(r.user)),window.location.href="/"):u(r.message||"An error occurred")}catch(o){console.error("Fetch error:",o),u("Something went wrong. Please try again.")}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"form-box",children:[e.jsx("h2",{children:s?"Login":"Sign Up"}),e.jsxs("form",{onSubmit:h,children:[c&&e.jsx("p",{className:"error-message",children:c}),!s&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Username"}),e.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:a.username,onChange:t,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:a.email,onChange:t,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",name:"password",placeholder:"Enter your password",value:a.password,onChange:t,required:!0})]}),e.jsx("button",{type:"submit",className:"btn",children:s?"Login":"Sign Up"})]}),e.jsxs("p",{className:"toggle-text",children:[s?"Don't have an account?":"Already have an account?",e.jsx("span",{onClick:()=>p(!s),children:s?" Sign up":" Login"})]})]})})}export{S as default};
