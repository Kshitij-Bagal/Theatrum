import{u as w,r as l,j as e,L as y}from"./index-DU0KpIvo.js";import{F as N,a as C}from"./index-CwRFEMWb.js";function $(){const{type:c}=w(),[i,u]=l.useState([]),[j,x]=l.useState({}),[d,h]=l.useState(!0),[o,m]=l.useState(null),p="https://theatrum-server.onrender.com";l.useEffect(()=>{(async()=>{try{h(!0),m(null);const a=await fetch(`${p}/api/videos/types/${encodeURIComponent(c)}`),t=await a.json();if(!a.ok)throw new Error(t.message||"Failed to load videos");u(t);const n=[...new Set(t.map(r=>r.channelId))];n.length&&f(n)}catch(a){m(a.message||"Error fetching videos")}finally{h(!1)}})()},[c]);const f=async s=>{try{const a=await Promise.all(s.map(n=>fetch(`${p}/api/channels/${n}`).then(r=>r.json()))),t=s.reduce((n,r,g)=>(n[r]=a[g],n),{});x(n=>({...n,...t}))}catch(a){console.error("Error fetching channels:",a)}},v=({video:s})=>{const a=j[s.channelId]||{};return e.jsx("div",{className:"video-card",children:e.jsxs(y,{to:`/${s.channelId}/${s._id}`,className:"video-link",children:[e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"thumbnail"}),e.jsxs("div",{className:"card-content",children:[e.jsx("div",{className:"channel-avatar",children:e.jsx("img",{src:a.logo||"default-logo.png",alt:"Channel Avatar"})}),e.jsxs("div",{className:"video-info",children:[e.jsx("h3",{className:"video-title",children:s.title}),e.jsx("span",{className:"channel-name",children:a.name||"Unknown Channel"}),e.jsxs("div",{className:"video-stats",children:[e.jsxs("span",{children:[e.jsx(N,{})," ",s.views||0," views"]}),e.jsxs("span",{children:[e.jsx(C,{})," ",s.likes||0," likes"]})]})]})]})]})})};return e.jsxs("div",{className:"browse",children:[e.jsxs("h1",{children:["Browse: ",c]}),d&&e.jsx("p",{children:"Loading videos..."}),o&&e.jsx("p",{className:"error",children:o}),!d&&!o&&i.length===0&&e.jsx("p",{children:"No videos found."}),e.jsx("div",{className:"video-grid",children:i.map(s=>e.jsx(v,{video:s},s._id))})]})}export{$ as default};
