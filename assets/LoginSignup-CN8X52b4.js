import{r as l,b as x,j as e,e as j}from"./index-BLwjDCQM.js";function S(){const[s,p]=l.useState(!0),[a,g]=l.useState({email:"",password:"",username:""}),[c,u]=l.useState(""),m=x(),t=r=>{g({...a,[r.target.name]:r.target.value})},h=async r=>{r.preventDefault();const d=s?{email:a.email,password:a.password}:a;try{const o=s?"/api/users/login":"/api/users/register";console.log("Sending Payload:",d);const i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),n=await i.json();console.log("Response Status:",i.status),console.log("Response Data:",n),i.ok?(m(j(n)),sessionStorage.setItem("token",n.token),sessionStorage.setItem("user",JSON.stringify(n.user)),window.location.href="/"):u(n.message||"An error occurred")}catch(o){console.error("Fetch error:",o),u("Something went wrong. Please try again.")}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"form-box",children:[e.jsx("h2",{children:s?"Login":"Sign Up"}),e.jsxs("form",{onSubmit:h,children:[c&&e.jsx("p",{className:"error-message",children:c}),!s&&e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Username"}),e.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:a.username,onChange:t,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Email"}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter your email",value:a.email,onChange:t,required:!0})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:"Password"}),e.jsx("input",{type:"password",name:"password",placeholder:"Enter your password",value:a.password,onChange:t,required:!0})]}),e.jsx("button",{type:"submit",className:"btn",children:s?"Login":"Sign Up"})]}),e.jsxs("p",{className:"toggle-text",children:[s?"Don't have an account?":"Already have an account?",e.jsx("span",{onClick:()=>p(!s),children:s?" Sign up":" Login"})]})]})})}export{S as default};
