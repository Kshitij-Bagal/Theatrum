import{r as u,c as S,j as e,g as y}from"./index-CQaYZTkb.js";function m({label:s,type:o,name:a,value:i,onChange:n}){return e.jsxs("div",{className:"input-group",children:[e.jsx("label",{children:s}),e.jsx("input",{type:o,name:a,value:i,onChange:n,required:!0})]})}function f(){const[s,o]=u.useState(!0),[a,i]=u.useState({email:"",password:"",username:""}),[n,p]=u.useState(""),d=S(),g="https://youtubecloneserver-ro5i.onrender.com",l=t=>i({...a,[t.target.name]:t.target.value}),h=async t=>{t.preventDefault();const x=s?`${g}/api/users/login`:`${g}/api/users/register`,j=s?{email:a.email,password:a.password}:a;try{const c=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j)}),r=await c.json();c.ok?(d(y(r)),sessionStorage.setItem("token",r.token),sessionStorage.setItem("user",JSON.stringify(r.user)),window.location.href="/"):p(r.message||"An error occurred")}catch{p("Something went wrong. Please try again.")}};return e.jsx("div",{className:"login-signup-container",children:e.jsxs("div",{className:"form-box",children:[e.jsx("h2",{children:s?"Login":"Sign Up"}),e.jsxs("form",{onSubmit:h,children:[n&&e.jsx("p",{className:"error-message",children:n}),!s&&e.jsx(m,{label:"Username",type:"text",name:"username",value:a.username,onChange:l}),e.jsx(m,{label:"Email",type:"email",name:"email",value:a.email,onChange:l}),e.jsx(m,{label:"Password",type:"password",name:"password",value:a.password,onChange:l}),e.jsx("button",{type:"submit",className:"btn",children:s?"Login":"Sign Up"})]}),e.jsxs("p",{className:"toggle-text",children:[s?"Don't have an account?":"Already have an account?",e.jsx("span",{onClick:()=>o(!s),children:s?" Sign up":" Login"})]})]})})}export{f as default};
