import{r as h,j as p,L as v}from"./index-BLwjDCQM.js";import{V as T}from"./VideoList-7VBI3Dw2.js";import"./VideoCard-C1McWVxo.js";const $=()=>{const[f,a]=h.useState([]),[y,m]=h.useState(!1),[u,o]=h.useState(null),n="http://localhost:8000",i=async()=>{m(!0);try{const s=await(await fetch(`${n}/api/videos`)).json();a(s)}catch(e){o(e.message)}finally{m(!1)}},c=async e=>{try{const t=await(await fetch(`${n}/api/videos`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json();a(r=>[...r,t])}catch(s){o(s.message)}},j=async(e,s)=>{try{const r=await(await fetch(`${n}/api/videos/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();a(d=>d.map(l=>l._id===e?r:l))}catch(t){o(t.message)}},V=async e=>{try{await fetch(`${n}/api/videos/${e}`,{method:"DELETE"}),a(s=>s.filter(t=>t._id!==e))}catch(s){o(s.message)}},g=async e=>{try{const t=await(await fetch(`${n}/api/videos/${e}/like`,{method:"POST"})).json();a(r=>r.map(d=>d._id===e?t:d))}catch(s){o(s.message)}},w=async(e,s)=>{try{const r=await(await fetch(`${n}/api/videos/${e}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).json();a(d=>d.map(l=>l._id===e?r:l))}catch(t){o(t.message)}};return h.useEffect(()=>{i()},[]),{videos:f,loading:y,error:u,fetchVideos:i,createVideo:c,updateVideo:j,deleteVideo:V,likeVideo:g,addComment:w}};function L(){const{videos:f,loading:a,error:y,fetchVideos:m}=$(),[u,o]=h.useState([]);h.useEffect(()=>{m(),n()},[]);const n=async()=>{try{const c=await(await fetch("http://localhost:8000/api/videos/get/types")).json();Array.isArray(c)?o(c):o([])}catch(i){console.error("Error fetching video types:",i),o([])}};return p.jsxs("div",{className:"home",children:[p.jsx("div",{className:"video_types",children:u.map((i,c)=>p.jsx(v,{to:`/browse/${encodeURIComponent(i)}`,className:"video-type",children:i},c))}),a&&p.jsx("p",{children:"Loading videos..."}),y&&p.jsx("p",{children:y}),!a&&!y&&p.jsx(T,{videos:f})]})}export{L as default};
